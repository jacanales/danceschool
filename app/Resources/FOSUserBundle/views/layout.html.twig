{% extends 'MopaBootstrapBundle::base_sass_3.2.html.twig' %}

{% block title %}Mayimbe's Dance School{% endblock %}
{% block headline %}{% endblock headline %}

{% block head_script %}
    {% javascripts
    'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock head_script %}

{% block head_style %}
    {{ parent() }}
    <!-- Bootstrap core CSS -->
    {% stylesheets filter='cssrewrite,?yui_css'
    '@MopaBootstrapBundle/Resources/public/bootstrap/dist/css/bootstrap.css'
    '//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css'
    %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet"
          media="screen" />
    {% endstylesheets %}

    <!-- Custom styles for this template -->
    <link href="{{ asset('css/layout/layout.css') }}" rel="stylesheet">
{% endblock head_style %}

{% block body_tag %}
<body data-spy="scroll" data-target="#navbar-body">
{% endblock body_tag %}

{% block body %}
    {{ parent() }}
{% endblock body %}

{% block navbar %}
    {% embed '@MopaBootstrap/Navbar/navbar.html.twig' with { fixedTop: true, staticTop: true, inverse: true, id: 'navbar-body' } %}
        {% block brand %}
            <a class="navbar-brand" href="#">Mayimbe</a>
        {% endblock %}

        {% block menu %}
            {{ mopa_bootstrap_menu('AppBundle:Builder:mainMenu') }}
            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <div class="pull-right">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-user"></span>{{  app.user.username }} <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="{{ path('fos_user_profile_show') }}"><span class="glyphicon glyphicon-user"></span>Profile</a></li>
                            <li><a href="{{ path('fos_user_profile_edit') }}"><span class="glyphicon glyphicon-cog"></span>Settings</a></li>
                            <li class="divider"></li>
                            <li><a href="{{ path('fos_user_security_logout') }}">
                                <span class="glyphicon glyphicon-off"></span>{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                </div>
            {% else %}
                <form class="navbar-form navbar-right" role="search" action="{{ path("fos_user_security_check") }}" method="post">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
                    <div class="form-group">
                        <input type="text" class="form-control" name="_username" placeholder="{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}">
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" name="_password" placeholder="{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}">
                    </div>
                    <button type="submit" class="btn btn-primary">{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}</button>
                </form>
            {% endif %}
        {% endblock %}
    {% endembed %}

    <div style="display:none;">
        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
            {{ 'layout.logged_in_as'|trans({'%username%': app.user.username}, 'FOSUserBundle') }} |
            <a href="{{ path('fos_user_security_logout') }}">
                {{ 'layout.logout'|trans({}, 'FOSUserBundle') }}
            </a>
        {% else %}
            <a href="{{ path('fos_user_security_login') }}">{{ 'layout.login'|trans({}, 'FOSUserBundle') }}</a>
        {% endif %}
    </div>
{% endblock navbar %}

{% block content_content %}
    {% if app.request.hasPreviousSession %}
        {% for type, messages in app.session.flashbag.all() %}
            {% for message in messages %}
                <div class="flash-{{ type }}">
                    {{ message|trans({}, 'FOSUserBundle') }}
                </div>
            {% endfor %}
        {% endfor %}
    {% endif %}

    <div>
        {% block fos_user_content %}
        {% endblock fos_user_content %}
    </div>
{% endblock content_content %}

{% block content_sidebar %}{% endblock content_sidebar %}

{% block footer %}
    <p>&copy; <a href="http://www.zonadev.es" target="_blank">Jes√∫s A. Canales</a></p>
{% endblock footer %}
