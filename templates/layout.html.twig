{% extends 'MopaBootstrapBundle::base.html.twig' %}

{% block title %}Dance School{% endblock %}
{% block headline %}{% endblock headline %}

{% block head_script %}
    <script type="text/javascript" src="{{ asset('build/app.js') }}"></script>
{% endblock head_script %}

{% block head_style %}
    <link href="{{ asset('build/app.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <!-- Bootstrap core CSS -->
    <link href="{{ asset('https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
{% endblock head_style %}

{% block head_bottom %}
    <link rel="author" href="humans.txt" />
{% endblock head_bottom %}

{% block body_tag %}
<body data-spy="scroll" data-target="#navbar-body">
{% endblock body_tag %}

{% block body %}
    {{ parent() }}
{% endblock body %}

{% block navbar %}
    {% embed '@MopaBootstrap/Navbar/navbar.html.twig' with { fixedTop: true, staticTop: true, inverse: true, id: 'navbar-body' } %}
        {% block brand %}
            <img class="navbar-brand" style="padding: 7px 10px;" src="{{ asset('images/logo.png') }}" />
            <a class="navbar-brand" href="#">Dance School</a>
        {% endblock %}

        {% block menu %}
            {{ mopa_bootstrap_menu('main_menu') }}

            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <div class="pull-right">
                <ul class="nav navbar-nav navbar-right">
                    {% if is_granted('ROLE_ADMIN') %}
                    <li>
                        <a href="/admin">Admin</a>
                    </li>
                    {% endif %}
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-user"></span>{{ 'layout.logged_in_as'|trans({'%username%': app.user.username}, 'FOSUserBundle') }} <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="{{ path('fos_user_profile_show') }}"><span class="glyphicon glyphicon-user"></span>{{ 'menu.option.show_profile'|trans({}, 'messages') }}</a></li>
                            <li><a href="{{ path('fos_user_profile_edit') }}"><span class="glyphicon glyphicon-cog"></span>{{ 'menu.option.edit_profile'|trans({}, 'messages') }}</a></li>
                            <li><a href="{{ path('fos_user_change_password') }}"><span class="glyphicon glyphicon-cog"></span>{{ 'menu.option.change_password'|trans({}, 'messages') }}</a></li>
                            <li class="divider"></li>
                            <li><a href="{{ path('fos_user_security_logout') }}">
                                <span class="glyphicon glyphicon-off"></span>{{ 'menu.option.logout'|trans }}</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                </div>
            {% else %}
                <div class="pull-right">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="/login">
                                Login
                            </a>
                        </li>
                    </ul>
                </div>
            {% endif %}
        {% endblock %}
    {% endembed %}
{% endblock navbar %}

{% block content_content %}
    {% if app.request.hasPreviousSession %}
        {% for type, messages in app.session.flashbag.all() %}
            {% for message in messages %}
                <div class="flash-{{ type }}">
                    {{ message|trans({}, 'FOSUserBundle') }}
                </div>
            {% endfor %}
        {% endfor %}
    {% endif %}

    <div>
        {% block fos_user_content %}
        {% endblock fos_user_content %}
    </div>
{% endblock content_content %}

{% block content_sidebar %}{% endblock content_sidebar %}

{% block footer %}
    {#<p>&copy; <a href="http://www.zonadev.es" target="_blank">Jes√∫s A. Canales</a></p>#}
{% endblock footer %}

{% block foot_script %}
{% endblock foot_script %}